<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Wizard-Show</title>
<link rel="stylesheet" href="../../css/default/screen.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/default/eed.css" type="text/css" media="screen" />
</head>
<body>
<!--##begin-->
<div id="wizard">

    #(inhalt)

    <!--versions-umschalter-->
    <span style="float:right;">
        <!--##hide-version_prev-->
        | <a href="!{link_first}">&lt;&lt;</a> | <a href="!{link_prev}">&lt;</a> |
        <!--##show-->
        g(version) !#ausgaben_vaktuell g(of) !#ausgaben_vgesamt
        <!--##hide-version_next-->
        | <a href="!{link_next}">&gt;</a> | <a href="!{link_last}">&gt;&gt;</a> |
        <!--##show-->
    </span>

    <div class="clearer">
        <a name="preview">&nbsp;</a>
    </div>

    #{image_map}

    <div style="float:left;">
        <div id="vorschau" style="display:none;">
            <div id="substance"></div>
        </div>

        <!--##hide-no_sort_content-->
        <div style="float:left;display:block;margin-left:10px;width:550px;" id="no_sort_content">#(show_none)</div>
        <!--##show-->

        <!--##hide-sort_content-->
        <ul id="content_blocks" style="float:left;display:block;margin-left:10px;width:550px;">
            <!--##loop-sort_content-->
            <li id="item_!{key}" class="!{class}" style="!{style}">
<!--                 <a name="item_!{key}" href="#" style="float:right;">nach oben</a> -->
                <div class="clearer"></div>
                !{value_html}
                <div class="clearer"></div>
                <p class="block_edit" !{modify}>
                    <a href="!{link_up}" class="button" title="#(wiz_moveup_desc)">#(wiz_moveup)</a>
                    <a href="!{link_down}" class="button" title="#(wiz_movedown_desc)">#(wiz_movedown)</a>
                    <a href="!{delete}" class="button" title="#(wiz_delete_desc)">#(wiz_delete)</a>
                </p>
                <div class="clearer"></div>
            </li>
            <!--##cont-->
        </ul>
        <!--##show-->
    </div>

    <div id="margin" style="padding:0;width:140px;float:right;">
        <div class="box">
            <h3>#(add_block)</h3>
            <!--##loop-add_buttons-->
            <a href="!{link}" class="button" style="display:block;margin:3px;">!{item}</a>
            <!--##cont-->
        </div>

        <!--##hide-default-->
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="button" onclick="preview();" id="button_preview" class="button">g(preview)</button>
<!--                 <button type="submit" name="save[]" value="save" class="button">g(save)</button> -->
                <button type="submit" name="version[]" value="version" class="button">g(version)</button>
                <button type="submit" name="cancel[]" value="cancel" class="button">g(abort)</button>
                <div class="clearer"></div>
            </form>
        </div>
        <!--##show-->

        <!--##hide-edit-->
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="button" onclick="preview();" id="button_preview" class="button">g(preview)</button>
                <button type="submit" name="version[]" value="version" class="button">g(save)</button>
                <button type="submit" name="cancel[]" value="cancel" class="button">g(abort)</button><br />
                <label class="cbra"><input type="checkbox" name="release_mark" value="-1" class="button" />#(ask_release)</label>
                <div class="clearer"></div>
            </form>
        </div>
        <!--##show-->

        <!--##hide-publish-->
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="button" onclick="preview();" id="button_preview" class="button" style="display:block;margin:3px;width:126px;">g(preview)</button>
<!--                 <button type="submit" name="save[]" value="save" class="button" style="display:block;margin:3px;width:126px">g(save)</button> -->
                <button type="submit" name="version[]" value="version" class="button" style="display:block;margin:3px;width:126px">g(version)</button>
                <button type="submit" name="cancel[]" value="cancel" class="button" style="display:block;margin:3px;width:126px">g(abort)</button>
                <label class="cbra"><input type="checkbox" name="release_mark" value="-1" class="button" />#(release)</label>
                <div class="clearer"></div>
            </form>
        </div>
        <!--##show-->

        <!--##hide-blocked-->
        <div class="box">
            <input type="checkbox" name="release_mark" value="-1" checked="true" disabled="true" />#(blocked_release)
            <div class="clearer"></div>
        </div>
        <!--##show-->
    </div>

    <div class="clearer"></div>

</div>

!#ausgaben_output
!#ausgaben_inaccessible

<script type="text/javascript">
    Sortable.create("content_blocks",
        {only: 'ajax_move',
            onUpdate:function(){
                new Ajax.Request(
                    '!#ausgaben_ajax_request?' + Sortable.serialize("content_blocks"),
                    {
                        onComplete:function(){
                            new Effect.Highlight("content_blocks",{startcolor: '#FEF6DE'});
                            location.reload(true);
                        }
                    }
                );
//                 new Ajax.Updater(
//                     'test',
//                     '!#ausgaben_ajax_request?' + Sortable.serialize("content_blocks")
//                 );
            }
        }
    );
    function preview() {
        if ( $('vorschau').style.display == 'none' ) {
            var update = new Ajax.Updater('substance',
                                        '!#ausgaben_form_aktion',
                                        {
                                            asynchronous:true,
                                            parameters: 'ajax=on&save=on',
                                            onSuccess:function(){
                                                $('button_preview').style.background = '#FF9148';
                                                new Effect.Parallel(
                                                    [
                                                        new Effect.BlindDown('vorschau'),
//                                                         <!--##hide-no_sort_content-->
                                                        new Effect.BlindUp('no_sort_content'),
//                                                         <!--##show-->
                                                        new Effect.BlindUp('content_blocks')
                                                    ]
                                                );
                                            }
                                        }
            );
            return false;
        } else {
            $('button_preview').style.background = '#EEEEEE';
            new Effect.Parallel(
                [
                    new Effect.BlindUp('vorschau'),
//                     <!--##hide-no_sort_content-->
                    new Effect.BlindDown('no_sort_content'),
//                     <!--##show-->
                    new Effect.BlindDown('content_blocks')
                ]
            );
        }
    }
    function anzeigen(id) {
        show = document.getElementById(id).style.display;
        f="ls_"+id;
        if ( show == 'none' ) {
            document.getElementById(f).style.background='url(/images/html/minuszeichen.jpg) left -5px no-repeat';
            new Effect.BlindDown(id, {duration: 0.1});
        } else {
            new Effect.BlindUp(id, {duration: 0.1})
            document.getElementById(f).style.background='url(/images/html/pluszeichen.jpg) left -5px no-repeat';
        }
        return false;
    }
</script>
<!--##end-->

    <fieldset>
        <legend>#(add_block)</legend>
        <!--##loop-add_buttons-->
            <a href="!{link}" class="button">!{item}</a>
        <!--##cont-->
        <div class="clearer"></div>
    </fieldset>

    <!--##hide-default-->
    <fieldset class="buttons">
        <form method="post" action="!#ausgaben_form_aktion">
            <button type="button" onclick="preview();" class="button">g(preview)</button>
            <button type="submit" name="send[]" value="save" class="button">g(save)</button>
            <button type="submit" name="send[]" value="version" class="button">g(version)</button>
            <button type="submit" name="send[]" value="cancel" class="button">g(abort)</button>
        </form>
    </fieldset>
    <!--##show-->

    <!--##hide-edit-->
    <fieldset class="buttons">
        <form method="post" action="!#ausgaben_form_aktion">
            <button type="button" onclick="preview();" class="button">g(preview)</button>
            <button type="submit" name="send[]" value="version" class="button">g(save)</button>
            <button type="submit" name="send[]" value="cancel" class="button">g(abort)</button><br />
            <label class="cbra"><input type="checkbox" name="release_mark" value="-1" class="button" />#(ask_release)</label>
        </form>
    </fieldset>
    <!--##show-->

    <!--##hide-publish-->
    <fieldset class="buttons">
        <form method="post" action="!#ausgaben_form_aktion">
            <button type="button" onclick="preview();" class="button">g(preview)</button>
            <button type="submit" name="send[]" value="save" class="button">g(save)</button>
            <button type="submit" name="send[]" value="version" class="button">g(version)</button>
            <button type="submit" name="send[]" value="cancel" class="button">g(abort)</button>
            <label class="cbra"><input type="checkbox" name="release_mark" value="-1" class="button" />#(release)</label>
        </form>
    </fieldset>
    <!--##show-->

    <!--##hide-blocked-->
    <fieldset>
        <input type="checkbox" name="release_mark" value="-1" checked="true" disabled="true" />#(blocked_release)
    </fieldset>
    <!--##show-->
</body>
</html>