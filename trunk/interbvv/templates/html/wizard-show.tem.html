<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Wizard-Show</title>
<link rel="stylesheet" href="../../css/default/screen.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/default/eed.css" type="text/css" media="screen" />
</head>
<body>
<!--##begin-->
<div id="wizard">

    <div class="admin_head" style="">
        #(inhalt)
        <div class="clearer"></div>
    </div>

<!--     #(inhalt) -->

    <!--versions-umschalter-->
    <span style="float:right;">
        <!--##hide-version_prev-->
        | <a href="!{link_first}">&lt;&lt;</a> | <a href="!{link_prev}">&lt;</a> |
        <!--##show-->
        g(version) !#ausgaben_vaktuell g(of) !#ausgaben_vgesamt
        <!--##hide-version_next-->
        | <a href="!{link_next}">&gt;</a> | <a href="!{link_last}">&gt;&gt;</a> |
        <!--##show-->
    </span>

    <div class="clearer">
        <a name="preview">&nbsp;</a>
    </div>

    #{image_map}

    <div style="float:left;background:#FFFFFF;margin:0 7px;">
<!--         <div id="vorhang" style="display:none;"></div> -->
        <div id="vorschau_container" style="display:none;">
            <div id="vorschau">
                <div id="substance" !#ausgaben_class></div>
            </div>
            <div id="preview_close">
                <img style="cursor: pointer;" alt="Vorschau schliessen" onclick="preview()" src="/images/html/lb/closelabel.gif"/>
            </div>
        </div>

        <!--##hide-no_sort_content-->
        <div style="float:left;display:block;margin-left:10px;width:550px;" id="no_sort_content">#(show_none)</div>
        <!--##show-->

        <!--##hide-sort_content-->
        <ul id="content_blocks" style="float:left;display:block;margin:5px;width:550px;">
            <!--##loop-sort_content-->
            <li id="item_!{key}" class="!{class}" style="!{style}">
<!--                 <a name="item_!{key}" href="#" style="float:right;">nach oben</a> -->
                <div class="clearer"></div>
                !{value_html}
                <div class="clearer"></div>
                <p class="block_edit" !{modify}>
                    <a href="!{link_up}" class="button" title="#(wiz_moveup_desc)">#(wiz_moveup)</a>
                    <a href="!{link_down}" class="button" title="#(wiz_movedown_desc)">#(wiz_movedown)</a>
                    <a href="!{delete}" class="button" title="#(wiz_delete_desc)">#(wiz_delete)</a>
                </p>
                <div class="clearer"></div>
            </li>
            <!--##cont-->
        </ul>
        <!--##show-->
    </div>

    <div id="margin" style="padding:0;width:135px;float:right;background:none;margin:0;">
        <div class="box">
            <h3>#(add_block)</h3>
            <!--##loop-add_buttons-->
            <a href="!{link}" class="button" style="display:block;margin:3px;" title="!{item}">!{item}</a>
            <!--##cont-->
        </div>

        <!--##hide-default-->
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="button" onclick="preview();" id="button_preview" class="button">g(preview)</button>
<!--                 <button type="submit" name="save[]" value="save" class="button">g(save)</button> -->
                <button type="submit" name="version[]" value="version" class="button">g(version)</button>
                <div id="cancel">
                    <p>blab, blib, blub</p>
                    <button type="submit" name="cancel[]" value="cancel" class="button">g(abort)</button>
                </div>
                <div class="clearer"></div>
            </form>
        </div>
        <!--##show-->

        <!--##hide-edit-->
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="button" onclick="preview();" id="button_preview" class="button" style="display:block;margin:3px;width:119px;">g(preview)</button>
                <button type="submit" name="version[]" value="version" class="button" style="display:block;margin:3px;width:119px;">g(save)</button>
                <button type="submit" name="cancel[]" value="cancel" class="button" style="display:block;margin:3px;width:119px;">g(abort)</button><br />
                <div class="clearer"></div>
            </form>
        </div>
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="submit" name="version[]" value="version" class="button" style="display:block;margin:3px;width:119px;">#(ask_release)</button>
                <input type="hidden" name="release_mark" value="-1" class="button" />
                <div class="clearer"></div>
            </form>
        </div>
        <!--##show-->

        <!--##hide-publish-->
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="button" onclick="preview();" id="button_preview" class="button" style="display:block;margin:3px;width:119px;">g(preview)</button>
                <button type="submit" name="version[]" value="version" class="button" style="display:block;margin:3px;width:119px;">g(save)</button>
                <button type="button" onclick="buttonCancel();" class="button" style="display:block;margin:3px;width:119px;">g(abort)</button>
                <div id="cancel" style="display:none;">
                    #(confirm_cancel)
                    <p >
                        <button type="submit" name="cancel[]" value="cancel" class="button" style="display:block;margin:3px;width:100px;">g(yes)</button>
                        <button type="button" onclick="buttonCancel();" class="button" style="display:block;margin:3px;width:100px;float:right;">g(no)</button>
                    </p>
                </div>
                <div class="clearer"></div>
            </form>
        </div>
        <div class="box">
            <form method="post" action="!#ausgaben_form_aktion">
                <button type="submit" name="version[]" value="version" class="button" style="display:block;margin:3px;width:119px;">#(release)</button>
                <input type="hidden" name="release_mark" value="-1" class="button" />
                <div class="clearer"></div>
            </form>
        </div>
        <!--##show-->

        <!--##hide-blocked-->
        <div class="box">
            <input type="checkbox" class="radiocheck" name="release_mark" value="-1" checked="true" disabled="true" />#(blocked_release)
            <div class="clearer"></div>
        </div>
        <!--##show-->
    </div>

    <div class="clearer"></div>

</div>
<div id="vorhang_cancel" style="display:none;"></div>
<div id="vorhang_preview" style="display:none;"></div>

!#ausgaben_output
!#ausgaben_inaccessible

<script type="text/javascript">
//     <!--##hide-sort_content-->
    Sortable.create("content_blocks",
        {only: 'ajax_move',
            onUpdate:function(){
                new Ajax.Request(
                    '!#ausgaben_ajax_request?' + Sortable.serialize("content_blocks"),
                    {
                        onComplete:function(){
                            new Effect.Highlight("content_blocks",{startcolor: '#FEF6DE'});
                            location.reload(true);
                        }
                    }
                );
            }
        }
    );
//     <!--##show-->

    Event.observe('vorhang_cancel','click',buttonCancel);
    Event.observe('vorhang_preview','click',preview);

    var dauer = 0.5;
    var deckkraft = 0.8;

//     <!--##hide-ajax_scroll-->
    Event.observe(window,'load',ajax_scroll);
    function ajax_scroll() {
        if ( $('!{section}') ) {
            Effect.ScrollTo(
                '!{section}',{offset:-20}
            );
            Effect.Pulsate('!{section}');
        }
    }
//     <!--##show-->

    function buttonCancel() {
        if ( $('cancel').style.display == 'none' ) {
            // fenstergroesse bestimmen (funktion ist in lightbox.js)
            var arrayPageSize = getPageSize();
            // box zentrieren
            var pos_x = (window.innerWidth - $('cancel').getWidth()) / 2;
            var pos_y = (window.innerHeight - $('cancel').getHeight()) / 3;
            $('cancel').style.left = pos_x + 'px';
            $('cancel').style.top = pos_y + 'px';
            // "vorhang" einblenden
            $('vorhang_cancel').style.width = arrayPageSize[0] + 'px';
            $('vorhang_cancel').style.height = arrayPageSize[1] + 'px';
            new Effect.Appear('vorhang_cancel', { duration: dauer, from: 0.0, to: deckkraft });
            new Effect.Appear('cancel');
        } else {
            // nach oben scrollen und box und "vorhang" ausblenden
            new Effect.ScrollTo('head', { duration: dauer});
            new Effect.Fade('cancel');
            new Effect.Fade('vorhang_cancel', { duration: dauer});
        }
    }

    function preview() {
        if ( $('vorschau_container').style.display == 'none' ) {
            var update = new Ajax.Updater('substance',
                                        '!#ausgaben_form_aktion',
                                        {
                                            asynchronous:true,
                                            parameters: 'ajax=on&save=on',
                                            onSuccess:function(){
                                                // fenstergroesse bestimmen (funktion ist in lightbox.js)
                                                var arrayPageSize = getPageSize();
                                                // vorschau zentrieren
                                                var pos_x = (window.innerWidth - $('vorschau_container').getWidth()) / 2;
                                                $('vorschau_container').style.left = pos_x + 'px';
                                                // "vorhang" und vorschau einblenden
                                                $('vorhang_preview').style.width = arrayPageSize[0] + 'px';
                                                $('vorhang_preview').style.height = arrayPageSize[1] + 'px';
                                                new Effect.Appear('vorhang_preview', { duration: dauer, from: 0.0, to: deckkraft });
                                                new Effect.Appear('vorschau_container',{duration:0.5});
                                            }
                                        }
            );
            return false;
        } else {
            // nach oben scrollen und box und "vorhang" ausblenden
            new Effect.ScrollTo('head', { duration: dauer});
            new Effect.Fade('vorhang_preview',{duration:0.5});
            new Effect.Fade('vorschau_container',{duration:dauer});
        }
    }

    function anzeigen(id) {
        show = document.getElementById(id).style.display;
        f="ls_"+id;
        if ( show == 'none' ) {
            document.getElementById(f).style.background='url(/images/html/minuszeichen.jpg) left -5px no-repeat';
            new Effect.BlindDown(id, {duration: 0.1});
        } else {
            new Effect.BlindUp(id, {duration: 0.1})
            document.getElementById(f).style.background='url(/images/html/pluszeichen.jpg) left -5px no-repeat';
        }
        return false;
    }
</script>
<!--##end-->
</body>
</html>